---
nginx_user: "{% if ansible_os_family == 'RedHat' %}nginx{% elif ansible_os_family == 'Debian' %}www-data{% endif %}"
nginx_group: "{{nginx_user}}"

nginx_worker_processes: "{{ ansible_processor_vcpus }}"
nginx_max_clients: 512
nginx_worker_rlimit_nofile: 1024

nginx_http_params:
  - sendfile "on"
  - tcp_nopush "on"
  - tcp_nodelay "on"
  - keepalive_timeout "65"
  - access_log "/var/log/nginx/access.log"
  - error_log "/var/log/nginx/error.log"

nginx_sites:
 - server:
    file_name: default
    vars:
     - listen 80
     - server_name _
     - root "/usr/share/nginx/html"
     - index index.html

nginx_configs: 
  - config:
     file_name: proxy
     vars:
      - proxy_set_header X-Real-IP  $remote_addr
      - proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for
  - config:
     file_name: gzip
     vars:
      - gzip on
      - gzip_disable msie6

nginx_auth_basic_files: {}
